---
phase: 04-app-store-preparation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - mobile/app.json
  - mobile/eas.json
  - mobile/package.json
autonomous: true

must_haves:
  truths:
    - "app.json uses the expo-splash-screen config plugin instead of the legacy splash field"
    - "eas.json exists with development, preview, and production build profiles"
    - "expo-splash-screen is listed as a dependency in mobile/package.json"
  artifacts:
    - path: "mobile/eas.json"
      provides: "EAS Build configuration with three profiles"
      contains: "production"
    - path: "mobile/app.json"
      provides: "Updated Expo config with splash screen plugin and correct metadata"
      contains: "expo-splash-screen"
    - path: "mobile/package.json"
      provides: "expo-splash-screen dependency installed"
      contains: "expo-splash-screen"
  key_links:
    - from: "mobile/app.json"
      to: "mobile/assets/splash-icon.png"
      via: "expo-splash-screen plugin image reference"
      pattern: "splash-icon.png"
    - from: "mobile/eas.json"
      to: "mobile/app.json"
      via: "EAS reads bundleIdentifier from app.json ios config"
      pattern: "bundleIdentifier"
---

<objective>
Install expo-splash-screen, create eas.json build configuration, and modernize the app.json splash screen config.

Purpose: EAS Build requires eas.json to exist with build profiles. The legacy `splash` field in app.json should be replaced with the modern expo-splash-screen plugin approach (required for SDK 54). These are foundational config changes needed before any production build can be attempted.

Output: A properly configured eas.json, an updated app.json with the splash screen plugin, and expo-splash-screen installed.
</objective>

<execution_context>
@/Users/dylanwagner/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dylanwagner/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-app-store-preparation/04-RESEARCH.md
@mobile/app.json
@mobile/package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install expo-splash-screen and create eas.json</name>
  <files>
    mobile/package.json
    mobile/eas.json
  </files>
  <action>
    1. Install expo-splash-screen:
       ```bash
       cd mobile && npx expo install expo-splash-screen
       ```
       This installs the SDK 54-compatible version automatically.

    2. Create `mobile/eas.json` with three build profiles:
       ```json
       {
         "cli": {
           "version": ">= 14.0.0"
         },
         "build": {
           "development": {
             "developmentClient": true,
             "distribution": "internal"
           },
           "preview": {
             "distribution": "internal"
           },
           "production": {}
         },
         "submit": {
           "production": {
             "ios": {
               "ascAppId": "REPLACE_WITH_ASC_APP_ID"
             }
           }
         }
       }
       ```
       Note: The `ascAppId` is a placeholder -- it will be filled in when the app is created in App Store Connect during Phase 5 or when running `npx testflight`.
  </action>
  <verify>
    1. `cat mobile/eas.json` shows valid JSON with development, preview, and production profiles
    2. `grep expo-splash-screen mobile/package.json` shows the dependency is installed
    3. `ls mobile/node_modules/expo-splash-screen/` exists
  </verify>
  <done>
    eas.json exists with three build profiles (development, preview, production) and expo-splash-screen is installed.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update app.json to use expo-splash-screen plugin</name>
  <files>
    mobile/app.json
  </files>
  <action>
    1. Read current `mobile/app.json`.

    2. Remove the legacy `splash` block entirely:
       ```json
       "splash": {
         "image": "./assets/splash-icon.png",
         "resizeMode": "contain",
         "backgroundColor": "#ffffff"
       },
       ```

    3. Add the `expo-splash-screen` config plugin to the `plugins` array (alongside the existing expo-notifications plugin):
       ```json
       "plugins": [
         [
           "expo-notifications",
           {
             "icon": "./assets/icon.png"
           }
         ],
         [
           "expo-splash-screen",
           {
             "backgroundColor": "#2563EB",
             "image": "./assets/splash-icon.png",
             "imageWidth": 200
           }
         ]
       ]
       ```
       Using `#2563EB` (the app's primary blue from the theme) as the splash background color for brand consistency.

    4. Verify the resulting app.json is valid JSON (no trailing commas, correct nesting).

    5. Also add an `"eas"` section at the top level if not present, containing the EAS project ID. Actually, skip this -- EAS will add it automatically on first `eas build:configure` run. Don't add it manually to avoid conflicts.
  </action>
  <verify>
    1. `cat mobile/app.json | python3 -m json.tool` validates without errors
    2. Confirm no `"splash"` key exists at the top level of the expo config
    3. Confirm `"expo-splash-screen"` appears in the plugins array
    4. Confirm `backgroundColor` is `#2563EB` in the plugin config
  </verify>
  <done>
    app.json uses the modern expo-splash-screen plugin with branded blue background color. The legacy splash field is removed. The app icon reference and all other config remain intact.
  </done>
</task>

</tasks>

<verification>
1. `mobile/eas.json` exists and is valid JSON with three build profiles
2. `expo-splash-screen` is installed in mobile/node_modules
3. `mobile/app.json` has no legacy `splash` field
4. `mobile/app.json` has `expo-splash-screen` in the plugins array with backgroundColor `#2563EB`
5. `npx expo config` runs without errors in the mobile directory
</verification>

<success_criteria>
- eas.json is created with development, preview, and production build profiles
- expo-splash-screen is installed as a dependency
- app.json uses the expo-splash-screen plugin (no legacy splash block)
- Splash screen configured with brand blue (#2563EB) background
- All existing app.json config (icon, bundle ID, plugins, extra) is preserved
</success_criteria>

<output>
After completion, create `.planning/phases/04-app-store-preparation/04-02-SUMMARY.md`
</output>
